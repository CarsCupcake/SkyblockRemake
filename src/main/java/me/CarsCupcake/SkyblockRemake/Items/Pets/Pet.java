package me.CarsCupcake.SkyblockRemake.Items.Pets;

import java.util.ArrayList;
import java.util.HashMap;

import lombok.Getter;
import me.CarsCupcake.SkyblockRemake.Items.*;
import me.CarsCupcake.SkyblockRemake.utils.Assert;
import me.CarsCupcake.SkyblockRemake.utils.Pair;
import org.bukkit.inventory.ItemStack;
import me.CarsCupcake.SkyblockRemake.Skyblock.Stats;
import me.CarsCupcake.SkyblockRemake.Skyblock.SkyblockPlayer;

@Getter
public class Pet extends ItemManager {
    public final int maxLevel;
    //max means level 100 so half of the stats if pet goes to level 200
    private final ArrayList<AbilityLore> abilityLores = new ArrayList<>();
    private final ArrayList<PetAbility> petAbilities = new ArrayList<>();
    private final ArrayList<String> abilityName = new ArrayList<>();
    private final HashMap<Stats, Pair<Double>> stats = new HashMap<>();
    public final PetType petType;

    public Pet(String name, String itemID, String headTexture, ItemRarity rarity, int MaxLevel, PetType petType) {
        super(name, itemID, ItemType.Pet, null, null, null, null, 0, 0, 0, 0, rarity, headTexture);
        this.petType = petType;
        this.maxLevel = MaxLevel;
        super.setUnstackeble(true);
        Items.SkyblockItems.put(itemID, this);
    }

    public void addPetAbility(String abilityName, AbilityLore lore, PetAbility ability) {
        Assert.allNotNull("Not allowed to be null!", abilityName, lore);
        if (ability != null) petAbilities.add(ability);
        abilityLores.add(lore);
        this.abilityName.add(abilityName);
    }

    public ArrayList<String> buildAbilityLore(SkyblockPlayer player, ItemStack item) {
        ArrayList<String> lore = new ArrayList<>();
        if (!abilityLores.isEmpty()) for (int i = 0; i < abilityLores.size(); i++) {
            lore.add("ยง6" + abilityName.get(i));
            lore.addAll(abilityLores.get(i).makeLore(player, item));
            lore.add(" ");
        }
        return lore;
    }


    public void addStat(Stats stat, double baseValue, double maxValue) {
        stats.put(stat, new Pair<>(baseValue, maxValue));
    }

    public double getStat(Stats stat, int level) {
        Pair<Double> statParam = stats.get(stat);
        if (statParam == null) return 0;
        return (((double) ((level - 1) / (maxLevel - 1))) * statParam.getLast()) + statParam.getFirst();

    }

    //level = currlevel -> getNextLevel exp
    public double getRequieredXp(int level) {
        return switch (getRarity()) {
            case COMMON -> switch (level) {
                case 1 -> 100;
                case 2 -> 110;
                case 3 -> 120;
                case 4 -> 130;
                case 5 -> 145;
                case 6 -> 160;
                case 7 -> 175;
                case 8 -> 190;
                case 9 -> 210;
                case 10 -> 230;
                case 11 -> 250;
                case 12 -> 275;
                case 13 -> 300;
                case 14 -> 330;
                case 15 -> 360;
                case 16 -> 400;
                case 17 -> 440;
                case 18 -> 490;
                case 19 -> 540;
                case 20 -> 600;
                case 21 -> 660;
                case 22 -> 730;
                case 23 -> 800;
                case 24 -> 880;
                case 25 -> 960;
                case 26 -> 1050;
                case 27 -> 1150;
                case 28 -> 1260;
                case 29 -> 1380;
                case 30 -> 1510;
                case 31 -> 1650;
                case 32 -> 1800;
                case 33 -> 1960;
                case 34 -> 2130;
                case 35 -> 2310;
                case 36 -> 2500;
                case 37 -> 2700;
                case 38 -> 2920;
                case 39 -> 3160;
                case 40 -> 3420;
                case 41 -> 3700;
                case 42 -> 4000;
                case 43 -> 4350;
                case 44 -> 4750;
                case 45 -> 5200;
                case 46 -> 5700;
                case 47 -> 6300;
                case 48 -> 7000;
                case 49 -> 7800;
                case 50 -> 8700;
                case 51 -> 9700;
                case 52 -> 10800;
                case 53 -> 12000;
                case 54 -> 13300;
                case 55 -> 14700;
                case 56 -> 16200;
                case 57 -> 17800;
                case 58 -> 19500;
                case 59 -> 21300;
                case 60 -> 23200;
                case 61 -> 25200;
                case 62 -> 27400;
                case 63 -> 29800;
                case 64 -> 32400;
                case 65 -> 35200;
                case 66 -> 38200;
                case 67 -> 41400;
                case 68 -> 44800;
                case 69 -> 48400;
                case 70 -> 52200;
                case 71 -> 56200;
                case 72 -> 60400;
                case 73 -> 64800;
                case 74 -> 69420;
                case 75 -> 74200;
                case 76 -> 79200;
                case 77 -> 84700;
                case 78 -> 90700;
                case 79 -> 97200;
                case 80 -> 104200;
                case 81 -> 111700;
                case 82 -> 119700;
                case 83 -> 128200;
                case 84 -> 137200;
                case 85 -> 146700;
                case 86 -> 156700;
                case 87 -> 167700;
                case 88 -> 179700;
                case 89 -> 192700;
                case 90 -> 206700;
                case 91 -> 221700;
                case 92 -> 237700;
                case 93 -> 254700;
                case 94 -> 272700;
                case 95 -> 291700;
                case 96 -> 311700;
                case 97 -> 333700;
                case 98 -> 357700;
                case 99 -> 383700;
                default -> 383700;
            };

            case DIVINE, LEGENDARY -> switch (level) {
                case 1 -> 660;
                case 2 -> 730;
                case 3 -> 800;
                case 4 -> 880;
                case 5 -> 960;
                case 6 -> 1050;
                case 7 -> 1150;
                case 8 -> 1260;
                case 9 -> 1380;
                case 10 -> 1510;
                case 11 -> 1650;
                case 12 -> 1800;
                case 13 -> 1960;
                case 14 -> 2130;
                case 15 -> 2310;
                case 16 -> 2500;
                case 17 -> 2700;
                case 18 -> 2920;
                case 19 -> 3160;
                case 20 -> 3420;
                case 21 -> 3700;
                case 22 -> 4000;
                case 23 -> 4350;
                case 24 -> 4750;
                case 25 -> 5200;
                case 26 -> 5700;
                case 27 -> 6300;
                case 28 -> 7000;
                case 29 -> 7800;
                case 30 -> 8700;
                case 31 -> 9700;
                case 32 -> 10800;
                case 33 -> 12000;
                case 34 -> 13300;
                case 35 -> 14700;
                case 36 -> 16200;
                case 37 -> 17800;
                case 38 -> 19500;
                case 39 -> 21300;
                case 40 -> 23200;
                case 41 -> 25200;
                case 42 -> 27400;
                case 43 -> 29800;
                case 44 -> 32400;
                case 45 -> 35200;
                case 46 -> 38200;
                case 47 -> 41400;
                case 48 -> 44800;
                case 49 -> 48400;
                case 50 -> 52200;
                case 51 -> 56200;
                case 52 -> 60400;
                case 53 -> 64800;
                case 54 -> 69400;
                case 55 -> 74200;
                case 56 -> 79200;
                case 57 -> 84700;
                case 58 -> 90700;
                case 59 -> 97200;
                case 60 -> 104200;
                case 61 -> 111700;
                case 62 -> 119700;
                case 63 -> 128200;
                case 64 -> 137200;
                case 65 -> 146700;
                case 66 -> 156700;
                case 67 -> 167700;
                case 68 -> 179700;
                case 69 -> 192700;
                case 70 -> 206700;
                case 71 -> 221700;
                case 72 -> 237700;
                case 73 -> 254700;
                case 74 -> 272700;
                case 75 -> 291700;
                case 76 -> 311700;
                case 77 -> 333700;
                case 78 -> 357700;
                case 79 -> 383700;
                case 80 -> 411700;
                case 81 -> 441700;
                case 82 -> 476700;
                case 83 -> 516700;
                case 84 -> 516700;
                case 85 -> 611700;
                case 86 -> 666700;
                case 87 -> 726700;
                case 88 -> 791700;
                case 89 -> 861700;
                case 90 -> 936700;
                case 91 -> 1016700;
                case 92 -> 1101700;
                case 93 -> 1191700;
                case 94 -> 1286700;
                case 95 -> 1386700;
                case 96 -> 1496700;
                case 97 -> 1616700;
                case 98 -> 1746700;
                default -> 1886700;
            };
            case EPIC -> switch (level) {
                case 1 -> 440;
                case 2 -> 490;
                case 3 -> 540;
                case 4 -> 600;
                case 5 -> 660;
                case 6 -> 730;
                case 7 -> 800;
                case 8 -> 880;
                case 9 -> 960;
                case 10 -> 1050;
                case 11 -> 1150;
                case 12 -> 1260;
                case 13 -> 1380;
                case 14 -> 1510;
                case 15 -> 1650;
                case 16 -> 1800;
                case 17 -> 1960;
                case 18 -> 2130;
                case 19 -> 2310;
                case 20 -> 2500;
                case 21 -> 2700;
                case 22 -> 2920;
                case 23 -> 3160;
                case 24 -> 3420;
                case 25 -> 3700;
                case 26 -> 4000;
                case 27 -> 4350;
                case 28 -> 4750;
                case 29 -> 5200;
                case 30 -> 5700;
                case 31 -> 6300;
                case 32 -> 7000;
                case 33 -> 7800;
                case 34 -> 8700;
                case 35 -> 8700;
                case 36 -> 10800;
                case 37 -> 12000;
                case 38 -> 13300;
                case 39 -> 14700;
                case 40 -> 16200;
                case 41 -> 17800;
                case 42 -> 19500;
                case 43 -> 21300;
                case 44 -> 23200;
                case 45 -> 25200;
                case 46 -> 27400;
                case 47 -> 29800;
                case 48 -> 32400;
                case 49 -> 35200;
                case 50 -> 38200;
                case 51 -> 41400;
                case 52 -> 44800;
                case 53 -> 48400;
                case 54 -> 48400;
                case 55 -> 52200;
                case 56 -> 56200;
                case 57 -> 60400;
                case 58 -> 64800;
                case 59 -> 69400;
                case 60 -> 74200;
                case 61 -> 79200;
                case 62 -> 84700;
                case 63 -> 90700;
                case 64 -> 97200;
                case 65 -> 104200;
                case 66 -> 111700;
                case 67 -> 119700;
                case 68 -> 128200;
                case 69 -> 137200;
                case 70 -> 146700;
                case 71 -> 156700;
                case 72 -> 167700;
                case 73 -> 179700;
                case 74 -> 192700;
                case 75 -> 206700;
                case 76 -> 221700;
                case 77 -> 237700;
                case 78 -> 254700;
                case 79 -> 272700;
                case 80 -> 291700;
                case 81 -> 311700;
                case 82 -> 333700;
                case 83 -> 357700;
                case 84 -> 383700;
                case 85 -> 411700;
                case 86 -> 441700;
                case 87 -> 476700;
                case 88 -> 516700;
                case 89 -> 611700;
                case 90 -> 666700;
                case 91 -> 726700;
                case 92 -> 791700;
                case 93 -> 861700;
                case 94 -> 936700;
                case 95 -> 1016700;
                case 96 -> 1101700;
                case 97 -> 1191700;
                case 98 -> 1286700;
                default -> 1386700;
            };
            case MYTHIC, SUPREME, VERY_SPECIAL, SPECIAL -> switch (level) {
                case 1 -> 660;
                case 2 -> 730;
                case 3 -> 800;
                case 4 -> 880;
                case 5 -> 960;
                case 6 -> 1050;
                case 7 -> 1150;
                case 8 -> 1260;
                case 9 -> 1380;
                case 10 -> 1510;
                case 11 -> 1650;
                case 12 -> 1800;
                case 13 -> 1960;
                case 14 -> 2130;
                case 15 -> 2310;
                case 16 -> 2500;
                case 17 -> 2700;
                case 18 -> 2920;
                case 19 -> 3160;
                case 20 -> 3420;
                case 21 -> 3700;
                case 22 -> 4000;
                case 23 -> 4350;
                case 24 -> 4750;
                case 25 -> 5200;
                case 26 -> 5700;
                case 27 -> 6300;
                case 28 -> 7000;
                case 29 -> 7800;
                case 30 -> 8700;
                case 31 -> 9700;
                case 32 -> 10800;
                case 33 -> 12000;
                case 34 -> 13300;
                case 35 -> 14700;
                case 36 -> 16200;
                case 37 -> 17800;
                case 38 -> 19500;
                case 39 -> 21300;
                case 40 -> 23200;
                case 41 -> 25200;
                case 42 -> 27400;
                case 43 -> 29800;
                case 44 -> 32400;
                case 45 -> 35200;
                case 46 -> 38200;
                case 47 -> 41400;
                case 48 -> 44800;
                case 49 -> 48400;
                case 50 -> 52200;
                case 51 -> 56200;
                case 52 -> 60400;
                case 53 -> 64800;
                case 54 -> 69400;
                case 55 -> 74200;
                case 56 -> 79200;
                case 57 -> 84700;
                case 58 -> 90700;
                case 59 -> 97200;
                case 60 -> 104200;
                case 61 -> 111700;
                case 62 -> 119700;
                case 63 -> 128200;
                case 64 -> 137200;
                case 65 -> 146700;
                case 66 -> 156700;
                case 67 -> 167700;
                case 68 -> 179700;
                case 69 -> 192700;
                case 70 -> 206700;
                case 71 -> 221700;
                case 72 -> 237700;
                case 73 -> 254700;
                case 74 -> 272700;
                case 75 -> 291700;
                case 76 -> 311700;
                case 77 -> 333700;
                case 78 -> 357700;
                case 79 -> 383700;
                case 80 -> 411700;
                case 81 -> 441700;
                case 82 -> 476700;
                case 83 -> 516700;
                case 84 -> 516700;
                case 85 -> 611700;
                case 86 -> 666700;
                case 87 -> 726700;
                case 88 -> 791700;
                case 89 -> 861700;
                case 90 -> 936700;
                case 91 -> 1016700;
                case 92 -> 1101700;
                case 93 -> 1191700;
                case 94 -> 1286700;
                case 95 -> 1386700;
                case 96 -> 1496700;
                case 97 -> 1616700;
                case 98 -> 1746700;
                case 99 -> 1886700;
                default -> 1886700;
            };
            case RARE -> switch (level) {
                case 1 -> 275;
                case 2 -> 300;
                case 3 -> 330;
                case 4 -> 360;
                case 5 -> 400;
                case 6 -> 440;
                case 7 -> 490;
                case 8 -> 540;
                case 9 -> 600;
                case 10 -> 660;
                case 11 -> 730;
                case 12 -> 800;
                case 13 -> 880;
                case 14 -> 960;
                case 15 -> 1050;
                case 16 -> 1150;
                case 17 -> 1260;
                case 18 -> 1380;
                case 19 -> 1510;
                case 20 -> 1650;
                case 21 -> 1800;
                case 22 -> 1960;
                case 23 -> 2130;
                case 24 -> 2310;
                case 25 -> 2500;
                case 26 -> 2700;
                case 27 -> 2920;
                case 28 -> 3160;
                case 29 -> 3420;
                case 30 -> 3700;
                case 31 -> 4000;
                case 32 -> 4350;
                case 33 -> 4750;
                case 34 -> 5200;
                case 35 -> 5700;
                case 36 -> 6300;
                case 37 -> 7000;
                case 38 -> 7800;
                case 39 -> 8700;
                case 40 -> 9700;
                case 41 -> 10800;
                case 42 -> 12000;
                case 43 -> 13300;
                case 44 -> 14700;
                case 45 -> 16200;
                case 46 -> 17800;
                case 47 -> 19500;
                case 48 -> 21300;
                case 49 -> 23200;
                case 50 -> 25200;
                case 51 -> 27400;
                case 52 -> 29800;
                case 53 -> 32400;
                case 54 -> 35200;
                case 55 -> 38200;
                case 56 -> 41400;
                case 57 -> 44800;
                case 58 -> 48400;
                case 59 -> 52200;
                case 60 -> 56200;
                case 61 -> 60400;
                case 62 -> 64800;
                case 63 -> 69400;
                case 64 -> 74200;
                case 65 -> 79200;
                case 66 -> 84700;
                case 67 -> 90700;
                case 68 -> 97200;
                case 69 -> 104200;
                case 70 -> 111700;
                case 71 -> 119700;
                case 72 -> 128200;
                case 73 -> 137200;
                case 74 -> 146700;
                case 75 -> 156700;
                case 76 -> 167700;
                case 77 -> 179700;
                case 78 -> 192700;
                case 79 -> 206700;
                case 80 -> 221700;
                case 81 -> 237700;
                case 82 -> 254700;
                case 83 -> 272700;
                case 84 -> 291700;
                case 85 -> 311700;
                case 86 -> 333700;
                case 87 -> 357700;
                case 88 -> 383700;
                case 89 -> 411700;
                case 90 -> 441700;
                case 91 -> 476700;
                case 92 -> 516700;
                case 93 -> 561700;
                case 94 -> 611700;
                case 95 -> 666700;
                case 96 -> 726700;
                case 97 -> 791700;
                case 98 -> 861700;
                default -> 936700;


            };
            case UNCOMMON -> switch (level) {
                case 1 -> 175;
                case 2 -> 190;
                case 3 -> 210;
                case 4 -> 230;
                case 5 -> 250;
                case 6 -> 275;
                case 7 -> 300;
                case 8 -> 330;
                case 9 -> 360;
                case 10 -> 400;
                case 11 -> 440;
                case 12 -> 490;
                case 13 -> 540;
                case 14 -> 600;
                case 15 -> 660;
                case 16 -> 730;
                case 17 -> 800;
                case 18 -> 880;
                case 19 -> 960;
                case 20 -> 1050;
                case 21 -> 1150;
                case 22 -> 1260;
                case 23 -> 1380;
                case 24 -> 1510;
                case 25 -> 1650;
                case 26 -> 1800;
                case 27 -> 1960;
                case 28 -> 2130;
                case 29 -> 2310;
                case 30 -> 2500;
                case 31 -> 2700;
                case 32 -> 2920;
                case 33 -> 3160;
                case 34 -> 3420;
                case 35 -> 3700;
                case 36 -> 4000;
                case 37 -> 4350;
                case 38 -> 4750;
                case 39 -> 5200;
                case 40 -> 5700;
                case 41 -> 6300;
                case 42 -> 7000;
                case 43 -> 7800;
                case 44 -> 8700;
                case 45 -> 9700;
                case 46 -> 10800;
                case 47 -> 12000;
                case 48 -> 13300;
                case 49 -> 14700;
                case 50 -> 16200;
                case 51 -> 17800;
                case 52 -> 19500;
                case 53 -> 21300;
                case 54 -> 23200;
                case 55 -> 25200;
                case 56 -> 27400;
                case 57 -> 29800;
                case 58 -> 32400;
                case 59 -> 35200;
                case 60 -> 38200;
                case 61 -> 41400;
                case 62 -> 44800;
                case 63 -> 48400;
                case 64 -> 52200;
                case 65 -> 56200;
                case 66 -> 60400;
                case 67 -> 64800;
                case 68 -> 69400;
                case 69 -> 74200;
                case 70 -> 79200;
                case 71 -> 84700;
                case 72 -> 90700;
                case 73 -> 97200;
                case 74 -> 104200;
                case 75 -> 111700;
                case 76 -> 119700;
                case 77 -> 128200;
                case 78 -> 137200;
                case 79 -> 146700;
                case 80 -> 156700;
                case 81 -> 167700;
                case 82 -> 179700;
                case 83 -> 192700;
                case 84 -> 206700;
                case 85 -> 221700;
                case 86 -> 237700;
                case 87 -> 254700;
                case 88 -> 272700;
                case 89 -> 291700;
                case 90 -> 311700;
                case 91 -> 333700;
                case 92 -> 357700;
                case 93 -> 383700;
                case 94 -> 411700;
                case 95 -> 441700;
                case 96 -> 476700;
                case 97 -> 516700;
                case 98 -> 561700;
                case 99 -> 611700;
                default -> 611700;
            };
            case UNDEFINED -> 1;
            default -> 0;

        };
    }


}
